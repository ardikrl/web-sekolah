{% extends 'blog/web-admin/admin-base.html' %}

{% block admin-content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3">
    <h1 class="h2">{{ mapel.nama }} - {{ mapel.kelas.tahun_ajaran }}</h1>
    <div class="btn-toolbar mb-md-0" style="margin-left:-7px;">
        <div class="btn-group mr-2">
            <a href="{% url 'admin_mapel' %}" class="btn btn-sm btn-secondary">Kembali</a>
        </div>
        <div class="btn-group">
            <a href="{% url 'admin_mapel_nilai_template' mapel_id=mapel.id %}" class="btn btn-sm btn-warning">
                <span data-feather="download"></span> Download Nilai
            </a>
        </div>
    </div>
</div>
<div class="float-right">
    <form action="{% url 'admin_mapel_nilai_import' mapel_id=mapel.id %}" method="post" class="float-right" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="file-nilai" id="file-chooser" />
        <button type="input" class="btn btn-info btn-sm" id="id-upload-nilai" name="upload-nilai" disabled>
            <span data-feather="upload"></span> Upload Nilai
        </button>
    </form>
</div>
{% if uploaded_file_url %}
<p>File uploaded at: <a href="{{ uploaded_file_url }}">{{ uploaded_file_url }}</a></p>
{% endif %}
<div>
    <table class="table table-sm table-hover">
        <tbody>
            <tr>
                <td style="width: 30%">Mata Pelajaran</td>
                <td class="text-left" style="width: 70%">: {{ mapel.nama }}</td>
            </tr>
            <tr>
                <td>Tahun Pelajaran</td>
                <td class="text-left">:
                    {{ mapel.kelas.tahun_ajaran }}
                </td>
            </tr>
            <tr>
                <td>Guru Pengampu</td>
                <td class="text-left">:
                    {{ mapel.get_guru }}
                </td>
            </tr>
            <tr>
                <td>Kelas</td>
                <td class="text-left">:
                    {{ mapel.kelas.nama }}
                </td>
            </tr>
        </tbody>
    </table>
</div>

<div>
    <table class="table table-sm table-hover border">
        <thead class="thead-light">
            <tr class="border-1">
                <th rowspan="2" class="align-middle text-center border" style="width: 20%">Nama</th>
                <th colspan="3" class="text-center border" style="width: 3%">Pengetahuan</th>
                <th colspan="3" class="text-center border" style="width: 3%">Keterampilan</th>
            </tr>
            <tr>
                <th class="text-center border" style="width: 3%">Angka</th>
                <th class="text-center border" style="width: 3%">Huruf</th>
                <th class="text-center border" style="width: 35%">Deskripsi</th>
                <th class="text-center border" style="width: 3%">Angka</th>
                <th class="text-center border" style="width: 3%">Huruf</th>
                <th class="text-center border" style="width: 35%">Deskripsi</th>
            </tr>
        </thead>
        <tbody>
            {% for mapel in mapel.nilaimapel_set.all %}
            <tr>
                <td class="border">{{ mapel.siswa }}</td>
                <td class="text-center border">{{ mapel.nilai_angka_1 }}</td>
                <td class="text-center border">{{ mapel.nilai_huruf_1 }}</td>
                <td class="text-left border">{{ mapel.deskripsi_1 }}</td>
                <td class="text-center border">{{ mapel.nilai_angka_2 }}</td>
                <td class="text-center border">{{ mapel.nilai_huruf_2 }}</td>
                <td class="text-left border">{{ mapel.deskripsi_2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock admin-content %}

{% block js-footer %}
<script>
    $('input[type=file]').change(function () {
        if ($('input[type=file]').val() !== '') {
            $('#id-upload-nilai').attr('disabled', false)
        }
    })
</script>
{% endblock js-footer %}