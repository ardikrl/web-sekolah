{% extends 'base.html' %}

{% block custom-css %}
    <style>
        .recent-news {
            width: 100%!important;
        }

        .float-center {
            margin-left: auto;
            margin-right: auto;
            display: block;
        }

        .text-center {
            text-align: center !important;
        }
        .text-left {
            text-align: left!important;
        }
        .table-responsive {
            display: block;
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        .table {
            width: 100%;
            margin-bottom: 1rem;
            color: #212529;
            border-collapse: collapse;
        }
        .list-group {
            display: -ms-flexbox;
            display: flex;
            -ms-flex-direction: column;
            flex-direction: column;
            padding-left: 0;
            margin-bottom: 0;
            border-radius: .25rem;
        }
        .list-group-item {
            position: relative;
            display: block;
            padding: .75rem 1.25rem;
            background-color: #fff;
            border: 1px solid rgba(0,0,0,.125);
        }
        .text-danger {
            color: #dc3545!important;
        }
        .text-info {
            color: #17a2b8!important;
        }
        .border-bottom {
            border-bottom: 1px solid #dee2e6!important;
        }
        .ml-0, .mx-0 {
            margin-left: 0!important;
        }
        .pl-1, .px-1 {
            padding-left: .25rem!important;
        }
        .pb-0, .py-0 {
            padding-bottom: 0!important;
        }
        .pr-0, .px-0 {
            padding-right: 0!important;
        }
        .pt-0, .py-0 {
            padding-top: 0!important;
        }
        .border-0 {
            border: 0!important;
        }
    </style>
{% endblock custom-css %}

{% block home-page-items %}{% endblock home-page-items %}

{% block left-content %}
<div>
    <h1 class="text-center">Prestasi</h1>
</div>
<div class="table-responsive">
    <table class="table table-sm">
        <thead>
            <tr>
                <th>Nama Prestasi</th>
                <th class="text-center">Tahun Ajaran</th>
                <th class="text-center">Tanggal Kegiatan</th>
                <th class="text-center">Tingkat</th>
                <th class="text-center">Ranking</th>
                <th class="text-center">Pemegang Prestasi</th>
                <th class="text-right">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for prestasi in list_prestasi %}
            <tr>
                <td>{{ prestasi.nama_kegiatan }}</td>
                <td class="text-center">{% if prestasi.tahun_ajaran %}{{ prestasi.tahun_verbose }}{% else %}-{% endif %}
                </td>
                <td class="text-center">
                    {% if prestasi.tanggal_kegiatan %}{{ prestasi.tanggal_kegiatan }}{% else %}-{% endif %}</td>
                <td class="text-center">
                    {% if prestasi.tingkat_prestasi %}{{ prestasi.tingkat_verbose|title }}{% else %}-{% endif %}</td>
                <td class="text-center">
                    {% if prestasi.ranking_prestasi %}{{ prestasi.ranking_verbose }}{% else %}-{% endif %}</td>
                <td class="text-left">
                    {% if prestasi.pemegang_prestasi_guru.all %}
                    <ul class="list-group ml-0">
                        {% for guru in prestasi.pemegang_prestasi_guru.all %}
                        <li class="border-0 list-group-item py-0 pl-1 pr-0">
                            <div class="text-danger border-bottom">Guru:</div>{{ guru }}
                        </li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    {% if prestasi.pemegang_prestasi_siswa.all %}
                    <ul class="list-group ml-0">
                        <li class="border-0 list-group-item py-0 pl-1 pr-0">
                            <div class="text-info border-bottom">Siswa:</div>
                            {% for siswa in prestasi.pemegang_prestasi_siswa.all %}
                            {{ siswa.user.get_full_name }}{% if not forloop.last %},{% endif %}
                            {% endfor %}
                        </li>
                    </ul>
                    {% endif %}
                    {% if not prestasi.pemegang_prestasi_siswa.all and not prestasi.pemegang_prestasi_guru.all %}<p
                        class="text-center my-0">-</p>{% endif %}
                </td>
                <td>
                    <a href="#" class="float-right mr-1 btn btn-sm btn-warning">Lihat Rincian</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock left-content %}

{% block right-content %}{% endblock right-content %}

{% block left-footer %}{% endblock left-footer %}
